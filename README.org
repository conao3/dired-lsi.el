#+title: dired-lsi.el
#+author: conao3

[[https://github.com/conao3/dired-lsi.el/blob/master/LICENSE][https://img.shields.io/github/license/conao3/dired-lsi.el.svg?style=flat-square]]
[[https://github.com/conao3/dired-lsi.el/releases][https://img.shields.io/github/tag/conao3/dired-lsi.el.svg?style=flat-square]]
[[https://github.com/conao3/dired-lsi.el/actions][https://github.com/conao3/dired-lsi.el/workflows/Main%20workflow/badge.svg]]

Add directory descriptions to dired buffers. Annotate your folders with helpful memos that display inline.

This package is an Emacs client for [[https://github.com/ShotaroKataoka/ls-Improved][ls-Improved]], but also works standalone.

[[https://github.com/conao3/dired-lsi.el][https://raw.githubusercontent.com/conao3/files/master/blob/dired-lsi.el/dired-lsi.gif]]

** Examples

Filesystem Hierarchy Standard directory:

[[https://raw.githubusercontent.com/conao3/files/master/blob/dired-lsi.el/fhs-sample.png][https://raw.githubusercontent.com/conao3/files/master/blob/dired-lsi.el/fhs-sample.png]]

Machine learning project:

[[https://raw.githubusercontent.com/conao3/files/master/blob/dired-lsi.el/ml-sample.png][https://raw.githubusercontent.com/conao3/files/master/blob/dired-lsi.el/ml-sample.png]]

** Requirements

- Emacs 26.1 or later

** Installation

*** Using leaf.el

#+begin_src emacs-lisp
(leaf dired-lsi
  :ensure t
  :hook dired-mode-hook)
#+end_src

*** Using use-package

#+begin_src emacs-lisp
(use-package dired-lsi
  :ensure t
  :hook (dired-mode . dired-lsi-mode))
#+end_src

*** Manual

#+begin_src emacs-lisp
(add-hook 'dired-mode-hook 'dired-lsi-mode)
#+end_src

*** With dired-git integration

If you use [[https://github.com/conao3/dired-git.el][dired-git]] with all-the-icons:

#+begin_src emacs-lisp
(leaf dired-lsi
  :ensure t
  :custom ((dired-lsi--create-spacer-fn
            . (lambda () (when all-the-icons-dired-mode "  \t"))))
  :hook dired-mode-hook)
#+end_src

*** Optional: ls-Improved CLI

You can also install the =ls-improved= command-line tool via pip:

#+begin_src bash
pip install ls-Improved
#+end_src

See [[https://github.com/ShotaroKataoka/ls-Improved][ls-Improved]] for details.

** Usage

Enable =dired-lsi-mode= in any dired buffer to display directory descriptions.

*** Commands

- =dired-lsi-add-description= - Add or edit a description for the directory at point
- =dired-lsi-mkdir-with-description= - Create a new directory with a description

*** Manual editing

Descriptions are stored in =.description.lsi= files within each directory. You can edit these files directly.

After manual edits, revert the dired buffer with =g= (=dired-revert=) to see changes.

** Customization

- =dired-lsi-separator= - String displayed between filename and description (default: =" / "=)
- =dired-lsi--create-spacer-fn= - Function returning additional spacing string (for icon alignment)

** Contributing

Contributions are welcome. Please feel free to submit issues and pull requests.

*** Running tests

#+begin_src shell
# Install keg (test runner)
git clone https://github.com/conao3/keg ~/.keg
export PATH="$HOME/.keg/bin:$PATH"

# Run tests
make test
#+end_src

** License

GPL-3.0. See [[https://github.com/conao3/dired-lsi.el/blob/master/LICENSE][LICENSE]] for details.

** Author

Naoya Yamashita ([[https://github.com/conao3][conao3]])
